"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){function e(e){try{console.log("BlueShift-Wow-July-13-2022");var t=function(e){var t="";location.href.indexOf("?")&&(t=location.href.substr(location.href.indexOf("?")));var r=t.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return r?r[1]:null},r="",o=!1;e&&(o=!0,r=e.toUpperCase()+"-"),console.log("BS - client : ",o),console.log("BS - client prefix: ",r||"empty");var n,i=window.location.pathname,a=new RegExp(/^(93|355|213|684|376|244|809|268|54|374|297|247|61|672|43|994|242|246|973|880|375|32|501|229|975|284|591|387|267|55|673|359|226|257|855|237|238|345|236|235|56|86|886|57|269|682|506|385|53|357|420|45|767|253|593|20|503|240|291|372|251|500|298|679|358|33|596|594|241|220|995|49|233|350|30|299|473|671|502|224|245|592|509|504|852|36|354|91|62|98|964|353|972|39|225|876|81|962|7|254|686|82|850|965|996|371|856|961|266|231|370|218|423|352|853|389|261|265|60|960|223|356|692|222|230|52|691|373|976|212|258|95|264|674|977|31|599|869|687|64|505|227|234|683|1670|47|968|92|680|507|675|595|51|63|48|351|1787|974|262|40|250|670|378|239|966|221|381|248|232|65|421|386|677|252|27|34|94|290|508|249|597|46|41|963|689|255|66|228|690|676|1868|216|90|993|688|256|380|971|44|598|1|678|58|84|1340|681|685|967|243|260|263)\d+/),c=function(e){return a.test(e)},l=function(){return(new Date).toISOString()},d=function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},u=!1,s="",p="",w="",f=!0,m=JSON.parse(window.__CTR_FP_TRACKING_SETTINGS.FP_TRACKING_CUSTOM_DATA).campaignName,g=!1,h="",_=t("guid");if("false"===t("ext_scripts"))return;var y=function(){var e=window.ctrwowCheckout.checkoutData.getProduct(),t=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity;return{products:[{productId:r+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku}},v=function(){try{var e={firstname:document.querySelector('[name="firstName"]').value||"",lastname:document.querySelector('[name="lastName"]').value||"",ship_city:document.querySelector('[name="city"]').value,ship_address:document.querySelector('[name="address1"]').value,ship_state:document.querySelector('[name="state"]').value,ship_zip:document.querySelector('[name="zipCode"]').value,ship_country:document.querySelector('[name="countryCode"]').value,customer_language:document.querySelector("html").getAttribute("lang")||"",joined_at:l(),fingerprint_id:window._EA_ID,referrer:document.referrer};return o&&(e.client=o),window.CC_Code&&(e.coupon=window.CC_Code),u&&(e=_objectSpread(_objectSpread({},e),{},{phone_number:w||document.querySelector('[name="phoneNumber"]').value,phone_valid:u,phone_linetype:s,phone_carrier:p})),f||(e=_objectSpread(_objectSpread({},e),{},{email:document.querySelector('[name="email"]').value})),e}catch(e){return console.log(e),{}}},b=function(e){try{var t=window.localStorage.getItem("realDoubleQuantity")?e.quantity/2:e.quantity,n=window.location.href,i=n.split("?")[0],a={email:document.querySelector('[name="email"]').value||"",product_ids:[r+e.productId],items:[{productId:r+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku,currency:window.localStorage.getItem("currencyCode"),landing_base_url:i,customer_language:document.querySelector("html").getAttribute("lang")||""};return o&&(a.client=o),a}catch(e){return console.log(e),{}}},S=function(e){if(e){var t=e.value&&!e.classList.contains("error"),r="https://sales-prod.tryemanagecrm.com/api/validation/verify-email/?email=".concat(e.value);t&&window.ctrwowUtils.callAjax(r,{headers:{X_CID:"584ea331-0cd2-4c48-85d9-737f9dddfa0b","Content-Type":"application/json"}}).then(function(e){if(!e)throw"Error";if(e.isVerified&&e.isValid){window.ctrwowUtils.events.emit("onValidEmail"),window.localStorage.removeItem("isInvalidEmail"),f=!1;var t=v();blueshift.identify(t);var r=window.ctrwowCheckout.checkoutData.getProduct(),o=b(r);blueshift.track("add_to_cart",o)}else window.localStorage.setItem("isInvalidEmail",!0),f=!0}).catch(function(e){window.localStorage.setItem("isInvalidEmail",!0),f=!0,console.log(e)})}},I=function(){var e=v();if(e.guid=_,!f){blueshift.identify(e);var t=window.ctrwowCheckout.checkoutData.getProduct(),r=b(t);r.one_click_purchase_reference=_,blueshift.track("add_to_cart",r)}for(var i=y(),a=i.products,c=[],l=0,d=a.length;l<d;l++)c.push(a[l].productId);var u={one_click_purchase_reference:_,fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:e.ship_country,regionCode:e.ship_state,ip:n.location.ip,product_ids:c,items:a,sku:i.sku,currency:window.localStorage.getItem("currencyCode")};o&&(u.client=o),blueshift.track("checkout",u)},k=function(){var e=JSON.parse(window.localStorage.getItem("prevItem")),t=window.localStorage.getItem("orderInfo"),n=window.localStorage.getItem("userPaymentType"),i=window.localStorage.getItem("location");if(e){for(var a=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity,c=[{productId:r+e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:a}],u=e.sku,s=[],p=0,w=c.length;p<w;p++)s.push(c[p].productId);var f=window.location.href,m=f.split("?")[0],g={order_create_date:l(),ip_address:i.ip||"",internal_campaignname:e.campaignName,device_type:d(),device_vendor:window.navigator.vendor,campaignname:e.campaignName,landingurl:f,landing_base_url:m,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:s,items:c,sku:u};if("creditcard"===n&&_&&(g.one_click_purchase_reference=_),o&&(g.client=o),"true"===window.localStorage.getItem("isInvalidEmail"))return!1;if(t){t=JSON.parse(t);var h=t.cusEmailPP||t.cusEmail||window.localStorage.getItem("customer_email");if(!h)return!1;g=_objectSpread(_objectSpread({},g),{},{email:h,order_id:r+t.orderNumber,customer_language:document.querySelector("html").getAttribute("lang")||""})}else{if(!window.localStorage.getItem("customer_email"))return!1;g=_objectSpread(_objectSpread({},g),{},{email:window.localStorage.getItem("customer_email")})}return g}return!1};window._blueshiftid="1"===t("isCardTest")?"fa8307145a64f9484defb6d8a18940f0":"13c25a652e2a0c05cb06a3b1dba09a85",window.blueshift=window.blueshift||[],blueshift.constructor===Array&&(blueshift.load=function(){for(var e=["identify","track","click","pageload","capture","retarget","presale_load","interstitial_load","upsell_load"],t=0;t<e.length;t++)blueshift[e[t]]=function(e){return function(){blueshift.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(e[t])}),o?blueshift.load({client:!0}):blueshift.load(),o?blueshift.pageload({client:!0}):blueshift.pageload(),i.indexOf("/pre")>-1&&(o?blueshift.presale_load({client:!0}):blueshift.presale_load()),i.indexOf("/index")>-1&&(o?blueshift.interstitial_load({client:!0}):blueshift.interstitial_load()),i.indexOf("/special-offer-")>-1&&(o?blueshift.upsell_load({client:!0}):blueshift.upsell_load());var C=function(){blueshift.constructor===Array&&function(){var e=document.createElement("script");e.type="text/javascript",e.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.getblueshift.com/blueshift.js",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},O=function(){try{window.localStorage.removeItem("isFiredMainOrderBlueshift"),n=window.__productListData.data.productList;var e=window.__checkoutData.data.product;if(!n||!window._EA_ID||g||!e)return;console.log("BlueShift",n,window._EA_ID),window.localStorage.setItem("_vid",window._EA_ID),g=!0;var r=Array.prototype.slice.call(document.querySelectorAll('[name="email"], [name="firstName"], [name="lastName"], [name="phoneNumber"]')),i=v(),a=$('input[name="phoneNumber"]'),l=document.querySelector('[name="shippingAddress"] [name="countryCode"]'),d=!1,C=!1,O=function e(r){try{var o=a.val().match(/\d/g);if(!o)return;o=o.join("");var n="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(o),m=c(o);window.localStorage.getItem("ctr__countryCode")&&(h=window.localStorage.getItem("ctr__countryCode")),l&&l.value&&(h=l.value),h&&(m&&!C||(n="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(o,"&country_code=").concat(h.toLowerCase()))),"1"===t("validPhone")&&a.rules("remove","cphone"),window.ctrwowUtils.callAjax(n).then(function(o){if(o.valid&&(window.phoneRes=o),o.country_code.toLowerCase()!==h.toLowerCase()&&!C)return C=!0,void e();if(C&&!o.valid&&window.phoneRes&&(o=_objectSpread({},window.phoneRes)),u=o.valid,s=o.line_type,p=o.carrier,u?(a.addClass("correct-phone"),w=o.international_format,i=v(),f||blueshift.identify(i)):"1"===t("validPhone")&&a.removeClass("correct-phone"),"1"===t("validPhone")){if(o.country_code&&l.value.toLowerCase()!==o.country_code.toLowerCase()&&l.querySelector('option[value="'.concat(o.country_code,'"]'))&&!r){d=!0,l.value=o.country_code,l.dispatchEvent(new Event("change"));$('form[name="shippingAddress"]').validate().element(l)}a.rules("add",{cphone:!0});$('form[name="customer"]').validate().element(a),d=!1}}).catch(function(e){console.log(e)})}catch(e){console.log(e)}};l&&l.addEventListener("change",function(){d||O(!0)}),_&&(O(),S(window._q('input[name="email"]'))),r.forEach(function(e){e.addEventListener("blur",function(e){try{i=v(),"email"===e.currentTarget.getAttribute("name")&&e.currentTarget.classList.contains("valid")&&window.currentEmail!==e.currentTarget.value&&(console.log("BlueShift - Fire identify"),window.currentEmail=e.currentTarget.value,S(e.currentTarget)),"phoneNumber"===e.currentTarget.getAttribute("name")&&window.currentPhone!==e.currentTarget.value&&(window.currentPhone=e.currentTarget.value,C=!1,O())}catch(e){console.log(e)}})}),window.pauseCheckoutProcessing={isPause:!0,delay:500},document.querySelector("body").insertAdjacentHTML("beforeend",'<span class="custom-loading" style="display: none;"></span>'),window.ctrwowUtils.events.on("afterSubmitOrder",function(e){e&&e.referenceId&&e.useCreditCard&&(_=e.referenceId,I())}),window.ctrwowUtils.events.on("declinePayment",function(){if(_){var e=k();e&&blueshift.track("decline",e)}}),window.ctrwowUtils.events.on("onAfterActivePopup",function(){try{window.CC_Code=window.ctrwowCheckout.checkoutData.getCouponCode(),i=v(),f||blueshift.identify(i)}catch(e){console.log(e)}}),window.ctrwowUtils.events.on("beforeSubmitOrder",function(){try{i=v(),f||blueshift.identify(i),window.localStorage.setItem("identifyData",JSON.stringify(i));var e=window.ctrwowCheckout.checkoutData.getProduct();e.campaignName=m,window.localStorage.setItem("prevItem",JSON.stringify(e)),console.log("BlueShift - Fire checkout");for(var t=y(),r=t.products,a=[],c=0,l=r.length;c<l;c++)a.push(r[c].productId);var d={fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:i.ship_country,regionCode:i.ship_state,ip:n.location.ip,product_ids:a,items:r,sku:t.sku,currency:window.localStorage.getItem("currencyCode")};o&&(d.client=o),blueshift.track("checkout",d)}catch(e){console.log(e)}}),window.localStorage.setItem("location",JSON.stringify(n.location)),window.ctrwowCheckout.checkoutData.onProductChange(function(){try{var t=window.ctrwowCheckout.checkoutData.getProduct();if(t.productId===e.productId)return;var r=b(e),o=b(t);document.querySelector('[name="email"]')&&document.querySelector('[name="email"]').classList.contains("valid")&&(f||(blueshift.track("remove_from_cart",r),blueshift.track("add_to_cart",o))),e=window.ctrwowCheckout.checkoutData.getProduct()}catch(e){console.log(e)}})}catch(e){console.log("Warning: orderPageEvents")}};!function(){try{if(C(),i.indexOf("/order")>-1){O();var e=0,t=setInterval(function(){e++,window.__productListData&&window.__productListData.data&&window.__productListData.data.productList&&window._EA_ID&&(O(),clearInterval(t)),50===e&&clearInterval(t)},300);return}var n=window.localStorage.getItem("orderInfo"),a=window.localStorage.getItem("location"),c=window.localStorage.getItem("isInvalidEmail"),u=window.localStorage.getItem("isFiredMainOrderBlueshift"),s=window._EA_ID||window.localStorage.getItem("_vid");window.localStorage.getItem("referrerUrl")||window.localStorage.setItem("referrerUrl",document.referrer);var p=function(e,t){try{var n=e.orderNumber,i=window.localStorage.getItem("doubleQuantity")?Math.ceil(e.quantity/2):e.quantity,c=Number(e.orderTotalFull),u=[{productId:r+e.orderedProducts[0].pid,sku:e.orderedProducts[0].sku,total_usd:e.orderTotalFull,quantity:i}],s=e.orderedProducts[0].sku;if(e.upsellUrls&&e.upsellUrls.length>0)for(var p=0,w=e.upsellUrls.length;p<w;p++)"fired"===e.upsellUrls[p].isFired&&(c+=e.upsellUrls[p].price);t&&(n=e.orderNumber,m=t.campaignName,u=[{productId:r+t.orderedProducts[0].pid,sku:t.orderedProducts[0].sku,total_usd:t.price,quantity:t.orderedProducts[0].quantity}],s=t.orderedProducts[0].sku);for(var f=[],g=0,h=u.length;g<h;g++)f.push(u[g].productId);var _=window.location.href,y=_.split("?")[0],v={order_id:r+n,email:e.cusEmail,order_create_date:l(),ip_address:a.ip||"",customer_language:document.querySelector("html").getAttribute("lang")||"",device_type:d(),device_vendor:window.navigator.vendor,campaignname:m,internal_campaignname:m,landingurl:_,landing_base_url:y,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:f,items:u,sku:s,revenue:c.toFixed(2),currency:window.localStorage.getItem("currencyCode")};return o&&(v.client=o),v}catch(e){return console.log(e),{}}};if(n&&s){n=JSON.parse(n),a=JSON.parse(a||"{}");var w=window.localStorage.getItem("identifyData");if(w&&(w=JSON.parse(w),window.localStorage.setItem("identifyData",JSON.stringify(w)),"true"!==c&&blueshift.identify(w)),u){if(n.upsellUrls&&n.upsellUrls.length>0){var f=n.upsellUrls.length-1,g=n.upsellUrls[f],h=localStorage.getItem("subOrderNumber");n.upsellUrls[f].isFired||n.upsellUrls[f].orderNumber===h||(n.upsellUrls[f].isFired="fired",console.log("BlueShift - Fire Purchase"),"true"!==c&&blueshift.track("purchase",p(n,g)))}}else console.log("BlueShift - Fire Purchase"),n.upsellUrls&&n.upsellUrls.length>0&&localStorage.setItem("subOrderNumber",n.upsellUrls[0].orderNumber),"true"!==c&&blueshift.track("purchase",p(n)),window.localStorage.setItem("isFiredMainOrderBlueshift",!0);window.localStorage.setItem("orderInfo",JSON.stringify(n))}if(window.ctrwowUtils.events.on("onBeforePlaceUpsellOrder",function(){var e;e="object"===_typeof(window.upsells)&&window.upsells.length>0?window.upsells[window.upsell_productindex||0]:window.ctrwowUpsell.productListData.getProductList().prices[window.upsell_productindex||0],e.campaignName=m,window.localStorage.setItem("prevItem",JSON.stringify(e))}),i.indexOf("decline")>-1){var _=k();_&&blueshift.track("decline",_)}}catch(e){console.log(e)}}(),"1"===t("validPhone")&&function(){try{var e={en:"Please enter a international phone number or update your country.",de:"Bitte geben Sie eine gültige Telefonnummer ein.",fr:"Veuillez saisir un numéro de téléphone valide.",jp:"有効な電話番号を入力してください。",cn:"请输入有效电话号码。",br:"Por favor insira um telefone válido.",es:"Por favor introduzca un número de teléfono válido.",pt:"Por favor insira um número de telefone válido."};window.phoneMsg=e.en,i.indexOf("/de/")>-1&&(window.phoneMsg=e.de),i.indexOf("/fr/")>-1&&(window.phoneMsg=e.fr),i.indexOf("/jp/")>-1&&(window.phoneMsg=e.jp),i.indexOf("/cn/")>-1&&(window.phoneMsg=e.cn),i.indexOf("/br/")>-1&&(window.phoneMsg=e.br),i.indexOf("/es/")>-1&&(window.phoneMsg=e.es),i.indexOf("/pt/")>-1&&(window.phoneMsg=e.pt),$.validator.addMethod("cphone",function(e,t){return $(t).hasClass("correct-phone")},window.phoneMsg)}catch(e){console.log(e)}}()}catch(e){console.log(e)}}!function(){window.addEventListener("load",function(){if(window.__CTRWOW_CONFIG){var t=window.__CTRWOW_CONFIG.X_CID;t&&fetch("https://websales-api.tryemanagecrm.com/api/clients/settings",{headers:{X_CID:t}}).then(function(e){return e.json()}).then(function(t){t&&e(t.clientCode)}).catch(function(e){return console.log(e)})}})}()}();